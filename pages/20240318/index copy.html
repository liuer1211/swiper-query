<html>
  <head>
  <meta charset="utf-8">
  <title>环形旋转木马视图切换</title>
      <link rel="stylesheet" href="css/swiper-bundle.min.css">
      <link rel="stylesheet" href="css/carousel.css">
      <script src="swiper/swiper-bundle.min.js"></script>   
  </head>
  
  <body>
    <div class="mainTit">史记·吴太伯世家</div>
    <div id="carousel">
      <div class="swiper swiper-3d swiper-initialized swiper-horizontal swiper-pointer-events">
        <div class="swiper-wrapper" id="swiper-wrapper-b13109ac9aca1b721" aria-live="polite" style="cursor: grab; transition-duration: 0ms; transform: translate3d(-2400px, 0px, 0px);">
          <!-- <div class="swiper-slide swiper-slide-duplicate" data-swiper-slide-index="1"  role="group" aria-label="2 / 5" style="transform: translateX(1818.89px) translateZ(1258.17px) rotateY(213.75deg);  transition-duration: 0ms;">
            <img src="images/img1.jpg">
            <p>北京冬奥会迎来倒计时一个月</p>
          </div>
          <div class="swiper-slide swiper-slide-duplicate" data-swiper-slide-index="2" role="group" aria-label="3 / 5"style="transform: translateX(1767.03px) translateZ(1372.98px) rotateY(191.25deg);  transition-duration: 0ms;">
            <img src="images/img1.jpg">
            <p>北京冬奥会迎来倒计时一123个月</p>
          </div>
          <div class="swiper-slide swiper-slide-duplicate swiper-slide-duplicate-prev" data-swiper-slide-index="3" role="group" aria-label="4 / 5" style="transform: translateX(1559.15px) translateZ(1372.98px) rotateY(168.75deg);  transition-duration: 0ms;">
              <img src="images/img1.jpg">
              <p>北京冬奥会迎来倒计时123一个月</p>
          </div>
          <div class="swiper-slide swiper-slide-duplicate swiper-slide-duplicate-active" data-swiper-slide-index="4" role="group" aria-label="5 / 5" style="transform: translateX(1244.5px) translateZ(1258.17px) rotateY(146.25deg); transition-duration: 0ms;">
            <img src="images/img1.jpg">
            <p>北京冬奥会迎来倒计时一345个月</p>
          </div> -->
          <!-- <div class="swiper-slide swiper-slide-duplicate-next" data-swiper-slide-index="0" role="group" aria-label="1 / 5" style="transform: translateX(886.12px) translateZ(1046.04px) rotateY(123.75deg); transition-duration: 0ms;">
            <img src="images/img1.jpg"><p>北京冬奥会迎阿萨德来倒计时一个月</p>
          </div>
          <div class="swiper-slide" data-swiper-slide-index="1" role="group" aria-label="2 / 5" style="transform: translateX(546.57px) translateZ(768.875px) rotateY(101.25deg); transition-duration: 0ms;">
            <img src="images/img1.jpg"><p>北京冬驱蚊器二无群翁奥会迎来倒计时一个月</p>
          </div>
          <div class="swiper-slide" data-swiper-slide-index="2" role="group" aria-label="3 / 5" style="transform: translateX(274.89px) translateZ(468.875px) rotateY(78.75deg); transition-duration: 0ms;">
            <img src="images/img1.jpg"><p>北京冬奥11111会迎来倒计时一个月</p>
          </div>
          <div class="swiper-slide swiper-slide-prev" data-swiper-slide-index="3" role="group" aria-label="4 / 5" style="transform: translateX(97.2182px) translateZ(191.711px) rotateY(56.25deg); transition-duration: 0ms;">
            <img src="images/img1.jpg"><p>北京冬22222222奥会迎来倒计时一个月</p>
          </div> -->
          <div class="swiper-slide"><img src="images/img1.jpg"><p>1</p></div>
          <div class="swiper-slide"><img src="images/img1.jpg"><p>2</p></div>
          <div class="swiper-slide"><img src="images/img1.jpg"><p>3</p></div>
          <div class="swiper-slide"><img src="images/img1.jpg"><p>4</p></div>
          <!-- <div class="swiper-slide swiper-slide-visible swiper-slide-active" data-swiper-slide-index="4" role="group" aria-label="5 / 5" style="transform: translateX(12.8075px) translateZ(-20.4213px) rotateY(33.75deg); transition-duration: 0ms;">
            <img src="images/img1.jpg"><p>北京冬奥会4444迎来倒计时一个月</p>
          </div>
          <div class="swiper-slide swiper-slide-duplicate swiper-slide-visible swiper-slide-next" data-swiper-slide-index="0" role="group" aria-label="1 / 5" style="transform: translateX(-3.94319px) translateZ(-135.226px) rotateY(11.25deg); transition-duration: 0ms;">
            <img src="images/img1.jpg"><p>北京冬奥会迎来倒计时一个月</p>
          </div>
          <div class="swiper-slide swiper-slide-duplicate swiper-slide-visible" data-swiper-slide-index="1" role="group" aria-label="2 / 5" style="transform: translateX(3.94319px) translateZ(-135.226px) rotateY(-11.25deg); transition-duration: 0ms;">
            <img src="images/img1.jpg"><p>北京冬奥会迎来倒计时一个月</p>
          </div>
          <div class="swiper-slide swiper-slide-duplicate swiper-slide-visible" data-swiper-slide-index="2" role="group" aria-label="3 / 5" style="transform: translateX(-12.8075px) translateZ(-20.4213px) rotateY(-33.75deg); transition-duration: 0ms;">
            <img src="images/img1.jpg"><p>北京冬奥会迎来倒计时一个月</p>
          </div>
          <div class="swiper-slide swiper-slide-duplicate swiper-slide-duplicate-prev" data-swiper-slide-index="3" role="group" aria-label="4 / 5" style="transform: translateX(-97.2182px) translateZ(191.711px) rotateY(-56.25deg); transition-duration: 0ms;">
            <img src="images/img1.jpg"><p>北京冬奥会迎来倒计时一个月</p>
          </div> -->
        </div>
        <span class="swiper-notification" aria-live="assertive" aria-atomic="true"></span>
      </div>
      <div class="swiper-pagination swiper-pagination-bullets swiper-pagination-horizontal">
        <span class="swiper-pagination-bullet"></span>
        <span class="swiper-pagination-bullet"></span>
        <span class="swiper-pagination-bullet"></span>
        <span class="swiper-pagination-bullet"></span>
        <span class="swiper-pagination-bullet swiper-pagination-bullet-active" aria-current="true"></span>
      </div>
      <div class="swiper-button-prev" tabindex="0" role="button" aria-label="Previous slide" aria-controls="swiper-wrapper-b13109ac9aca1b721"></div>
      <div class="swiper-button-next" tabindex="0" role="button" aria-label="Next slide" aria-controls="swiper-wrapper-b13109ac9aca1b721"></div>
    </div>
    <script>
      slideW = 300;//一张图300px, 每面四张角度22.5（PI/8），中心角度PI/16	             
      radius = slideW*0.5/Math.sin(Math.PI/16);//半径。圆心并不是视点中心，视点在1200px
      
      carouselSwiper = new Swiper('#carousel .swiper', {
        watchSlidesProgress: true,
        slidesPerView: 'auto',
        centeredSlides: false,
        loop: true,
        loopedSlides: 4,
        grabCursor:true,
        speed:1500,
        autoplay: {
          delay: 10000,
          stopOnLastSlide: false,
          disableOnInteraction: true,
        },
        // autoplay: false,
        // navigation: {
        //   nextEl: '.swiper-button-next',
        //   prevEl: '.swiper-button-prev',
        // },
        // pagination: {
        //   el: '.swiper-pagination',
        //   //clickable :true,
        // },
        on: {
          progress: function(swiper, progress) {
            for (i = 0; i < this.slides.length; i++) {
              var slide = this.slides.eq(i);
              var slideProgress = this.slides[i].progress;
              translateX = (slideProgress+1.5)*( slideW/3 - Math.cos((slideProgress+1.5)*0.125*Math.PI)*slideW*1.1/3) + 'px';//调整图片间距，根据图片宽度改变数值实现自适应
              rotateY = (slideProgress+1.5)*22.5 ;//图片角度
              translateZ = ( radius - Math.cos((slideProgress+1.5)*0.125*Math.PI)*radius - 150) + 'px';//调整图片远近，刚好4个在画框内
              slide.transform('translateX(' + translateX + ') translateZ(' + translateZ + ') rotateY(' + rotateY + 'deg)');
      
            }
          },
          setTransition: function(swiper, transition) {
            for (var i = 0; i < this.slides.length; i++) {
              var slide = this.slides.eq(i)
              slide.transition(transition);
            }
      
          }
        }
      
      })
    </script>
  </body>
</html>